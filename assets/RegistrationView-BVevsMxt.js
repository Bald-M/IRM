import{_ as B}from"./Industry Internship System Logo-lRtv42H_.js";import{d as U,a as f,r as V,b as n,n as D,h as L,o as w,c as N,e as s,w as t,g as c,k as b,f as h,q as A,l as F,E as g,p as j,m as $,_ as M}from"./index-jLWhBngo.js";const O=p=>(j("data-v-fd6dd468"),p=p(),$(),p),W={class:"container"},Z=O(()=>h("div",{style:{display:"flex","justify-content":"center"}},[h("img",{src:B,class:"industry-internship-system-logo"})],-1)),G={style:{"text-align":"center"}},H=U({__name:"RegistrationView",setup(p){const y=A("$axios"),x=F(),v=f(),d=f(!1),e=V({email:"",password:"",confirmedPassword:"",role:"Student",currentTime:new Date}),P=V({email:[{required:!0,message:"This field is required",trigger:"blur"},{type:"email",message:"Invalid email address",trigger:"blur"}],password:[{required:!0,message:"This field is requried",trigger:"blur"},{validator:(i,o,a)=>{if(!o)return a(new Error("This field is required"));const l=/[A-Z]/.test(o),u=/[a-z]/.test(o),m=/\d/.test(o);o.length<8?a(new Error("Password must be at least 8 characters long.")):!l||!u||!m?a(new Error("Password must include uppercase, lowercase letters, and numbers.")):a()},trigger:"blur"}],confirmedPassword:[{required:!0,message:"This field is required",trigger:"blur"},{validator:(i,o,a)=>{o!==e.password?a(new Error("Passwords do not match.")):a()},trigger:"blur"}],role:[{required:!0,message:"This field is requried",trigger:"blur"}]}),C=f("top"),_=f(!0),R=()=>{switch(e.role){case"Student":_.value=!0;break;case"Industry":_.value=!1;break}},q=()=>{const i="@student.wintec.ac.nz";e.email.endsWith(i)||(e.email.includes("@")?e.email=e.email.split("@")[0]+i:e.email+=i)},k=async i=>{i&&await i.validate((o,a)=>{o?(d.value=!0,y({url:"/register",method:"post",data:{email:e.email,password:e.password,role:e.role,username:e.email.split("@")[0]},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(l=>{console.log(l),l.data.code===409?(g.error(l.data.msg),d.value=!1):l.data.code===200?(g.success(l.data.msg),d.value=!1,x.push("/login")):(g.error(l.data.msg),d.value=!1)}).catch(l=>{console.log("Error:"),console.log(l),d.value=!1})):(console.log("ERROR:"),console.log(a),d.value=!1,g.error("Submit Failure. Please check the error message down input fields"))})};return(i,o)=>{const a=n("el-radio"),l=n("el-radio-group"),u=n("el-form-item"),m=n("el-input"),E=n("el-button"),I=n("RouterLink"),S=n("el-text"),T=n("el-form"),z=D("loading");return L((w(),N("div",W,[s(T,{model:e,rules:P,ref_key:"ruleFormRef",ref:v,"label-width":"auto",class:"form","label-position":C.value,"status-icon":""},{default:t(()=>[Z,s(u,{label:"Role",prop:"role",class:"mt-2",onChange:R},{default:t(()=>[s(l,{modelValue:e.role,"onUpdate:modelValue":o[0]||(o[0]=r=>e.role=r)},{default:t(()=>[s(a,{value:"Student",size:"large",class:"radio"},{default:t(()=>[c("Student")]),_:1}),s(a,{value:"Industry",size:"large",class:"radio"},{default:t(()=>[c("Industry")]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(u,{label:"Email",class:"mt-2",prop:"email"},{default:t(()=>[_.value===!0?(w(),b(m,{key:0,modelValue:e.email,"onUpdate:modelValue":o[1]||(o[1]=r=>e.email=r),clearable:"",placeholder:"id@student.wintec.ac.nz",onBlur:q},null,8,["modelValue"])):(w(),b(m,{key:1,modelValue:e.email,"onUpdate:modelValue":o[2]||(o[2]=r=>e.email=r),clearable:"",placeholder:"mail@example.com"},null,8,["modelValue"]))]),_:1}),s(u,{label:"Password",prop:"password"},{default:t(()=>[s(m,{modelValue:e.password,"onUpdate:modelValue":o[3]||(o[3]=r=>e.password=r),type:"password",clearable:"",placeholder:"******","show-password":""},null,8,["modelValue"])]),_:1}),s(u,{label:"Confim Password",prop:"confirmedPassword"},{default:t(()=>[s(m,{modelValue:e.confirmedPassword,"onUpdate:modelValue":o[4]||(o[4]=r=>e.confirmedPassword=r),type:"password",clearable:"",placeholder:"******","show-password":""},null,8,["modelValue"])]),_:1}),s(u,null,{default:t(()=>[s(E,{type:"primary",style:{margin:"0 auto"},onClick:o[5]||(o[5]=r=>k(v.value))},{default:t(()=>[c("Create Account")]),_:1})]),_:1}),h("div",G,[s(S,{size:"small"},{default:t(()=>[c("Already have an account? "),s(I,{to:"/login"},{default:t(()=>[c("Log in")]),_:1})]),_:1})])]),_:1},8,["model","rules","label-position"])])),[[z,d.value]])}}}),Y=M(H,[["__scopeId","data-v-fd6dd468"]]);export{Y as default};
